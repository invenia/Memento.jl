<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Records · Memento.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../../assets/invenia.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Memento.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../intro/">Introduction</a></li><li><a class="toctext" href="../loggers/">Loggers</a></li><li><a class="toctext" href="../handlers/">Handlers</a></li><li><a class="toctext" href="../formatters/">Formatters</a></li><li class="current"><a class="toctext" href>Records</a><ul class="internal"><li><a class="toctext" href="#AttributeRecords-1">AttributeRecords</a></li><li><a class="toctext" href="#Custom-Record-Types-1">Custom Record Types</a></li></ul></li><li><a class="toctext" href="../io/">IO</a></li><li><a class="toctext" href="../conclusion/">Conclusion</a></li></ul></li><li><span class="toctext">FAQ</span><ul><li><a class="toctext" href="../../faq/another-logging-lib/">Another logging library?</a></li><li><a class="toctext" href="../../faq/change-colors/">Changing colors?</a></li><li><a class="toctext" href="../../faq/logging-to-syslog/">Logging to Syslog?</a></li><li><a class="toctext" href="../../faq/json-formatting/">Producing JSON logs?</a></li><li><a class="toctext" href="../../faq/pkg-usage/">Using Memento in Julia packages?</a></li></ul></li><li><span class="toctext">API</span><ul><li><a class="toctext" href="../../api/public/">Public</a></li><li><a class="toctext" href="../../api/private/">Private</a></li></ul></li><li><a class="toctext" href="../../contributing/">Contributing</a></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href>Records</a></li></ul><a class="edit-page" href="https://github.com/invenia/Memento.jl/blob/master/docs/src/man/records.md#L"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Records</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="man_records-1" href="#man_records-1">Records</a></h1><p>Records store information about log events (e.g., message, timestamp, log level) that is used by <a href="../../api/public/#Memento.Formatter"><code>Formatter</code></a>s to format log messages. A record behaves as a dictionary-like container with <code>Symbol</code> keys, and you can access the properties of a <a href="../../api/public/#Memento.Record"><code>Record</code></a> by using <code>getindex</code> (i.e., <code>record[:msg]</code>).</p><p>By default, any subtypes of <a href="../../api/public/#Memento.Record"><code>Record</code></a> will treat its fields as keys. Non-standard subtypes of <a href="../../api/public/#Memento.Record"><code>Record</code></a> should implement <code>getindex(::MyRecord, ::Symbol)</code> and key-value pair iteration.</p><h2><a class="nav-anchor" id="AttributeRecords-1" href="#AttributeRecords-1">AttributeRecords</a></h2><p>An <a href="../../api/public/#Memento.AttributeRecord"><code>AttributeRecord</code></a> is an abstract subtype of <a href="../../api/public/#Memento.Record"><code>Record</code></a> that lazily evaluates its properties. Fields are stored as <a href="../../api/private/#Memento.Attribute"><code>Attribute</code></a>s, which will evaluate a function and cache the result the first time it is read.</p><p>By default, any subtypes of <a href="../../api/public/#Memento.AttributeRecord"><code>AttributeRecord</code></a> will expect its fields to be <a href="../../api/private/#Memento.Attribute"><code>Attribute</code></a>s. Non-standard subtypes of <a href="../../api/public/#Memento.AttributeRecord"><code>AttributeRecord</code></a> should implement <code>Memento.getattribute(::MyRecord, ::Symbol)</code> and key-value pair iteration, where the values have been extracted from <a href="../../api/private/#Memento.Attribute"><code>Attribute</code></a>s using <a href="../../api/private/#Base.get-Union{Tuple{Attribute{T}}, Tuple{T}} where T"><code>get</code></a>.</p><h2><a class="nav-anchor" id="Custom-Record-Types-1" href="#Custom-Record-Types-1">Custom Record Types</a></h2><p>While the <a href="../../api/public/#Memento.DefaultRecord"><code>DefaultRecord</code></a> in Memento (a standard <a href="../../api/public/#Memento.AttributeRecord"><code>AttributeRecord</code></a>) provides many of the keys and values needed for most logging applications, you may need to implement your own <a href="../../api/public/#Memento.Record"><code>Record</code></a> type. For example, if you&#39;re running a julia application on a cloud service provider like Amazon&#39;s EC2 you might want to include some general information about the resource your code is running on, which might result in a custom <a href="../../api/public/#Memento.Record"><code>Record</code></a> type that looks like:</p><pre><code class="language-julia"># TODO: Fix this example.
mutable struct EC2Record &lt;: AttributeRecord
    date::Attribute
    level::Attribute
    levelnum::Attribute
    msg::Attribute
    name::Attribute
    pid::Attribute
    lookup::Attribute
    stacktrace::Attribute
    instance_id::Attribute
    public_ip::Attribute
    iam_user::Attribute

    function EC2Record(name::AbstractString, level::AbstractString, levelnum::Int, msg)
        time = now()
        trace = Attribute{StackTrace}(get_trace)

        EC2Record(
            Attribute{DateTime}(() -&gt; round(time, Dates.Second)),
            Attribute(level),
            Attribute(levelnum),
            Attribute{AbstractString}(msg),
            Attribute(name),
            Attribute(myid()),
            Attribute{StackFrame}(get_lookup(trace)),
            trace,
            Attribute(ENV[&quot;INSTANCE_ID&quot;]),
            Attribute(ENV[&quot;PUBLIC_IP&quot;]),
            Attribute(ENV[&quot;IAM_USER&quot;]),
        )
    end
end</code></pre><p>NOTE: The above example simply assumes that you have some relevant environment variables set on the machine, but you could also query Amazon for that information.</p><footer><hr/><a class="previous" href="../formatters/"><span class="direction">Previous</span><span class="title">Formatters</span></a><a class="next" href="../io/"><span class="direction">Next</span><span class="title">IO</span></a></footer></article></body></html>
